<div class="container py-4">

    <!-- Header -->
    <div class="row mb-3">
        <div class="col">
            <h3>Asset List</h3>
            <p class="text-muted" *ngIf="!isAdmin">
                Showing your assigned assets only
            </p>
        </div>
    </div>

    <!-- Search & Buttons -->
    <div class="row mb-3 g-2 align-items-center">
        <div class="col-md-6">
            <input type="text" class="form-control" placeholder="Search assets..." [(ngModel)]="searchTerm"
                (input)="onSearchInput()" />
        </div>
        <div class="col-md-6 d-flex justify-content-md-end gap-2 flex-wrap">
            <button class="btn btn-success" (click)="exportExcel()">
                <i class="bi bi-file-earmark-excel me-1"></i> Export Excel
            </button>
            <button *ngIf="isAdmin" class="btn btn-primary" (click)="openCreateModal()">
                <i class="bi bi-plus-circle me-1"></i> Add
            </button>
            <button *ngIf="isAdmin" class="btn btn-dark" (click)="openDisposed()">
                <i class="bibi bi-trash3 me-1"></i> Disposed List
            </button>
        </div>
    </div>

    <!-- Table -->
    <div class="table-responsive shadow-sm rounded">
        <table class="table table-hover table-bordered align-middle mb-0">
            <thead class="table-secondary">
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Status</th>
                    <th *ngIf="isAdmin">Assigned To</th>
                    <th>Remark</th>
                    <th *ngIf="isAdmin">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let asset of filteredAssets" (click)="openDetails(asset)" style="cursor:pointer;">
                    <td>{{ asset.name }}</td>
                    <td>{{ asset.type }}</td>
                    <td>
                        <span class="badge" [style.background-color]="statusMap[+asset.status].color"
                            style="color: white;">
                            {{ statusMap[+asset.status].text }}
                        </span>
                    </td>
                    <td *ngIf="isAdmin">{{ asset.assignedUsername || '-' }}</td>
                    <td>{{ asset.remarks || '-' }}</td>
                    <td *ngIf="isAdmin">
                        <button class="btn btn-sm btn-info me-1"
                            (click)="openEditModal(asset); $event.stopPropagation();">
                            <i class="bi bi-pencil-fill"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" (click)="deleteAsset(asset); $event.stopPropagation();">
                            <i class="bi bi-trash-fill"></i>
                        </button>
                    </td>
                </tr>
            </tbody>

        </table>
    </div>
</div>